<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Bootstrap *must* tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<title>CS424-Project 2: Barchart sample page</title>
	<script src="../js/jquery-2.1.4.min.js"></script>
	<script type="text/javascript" src="../js/d3.min.js"></script>  <!-- D3 -->
	<script type="text/javascript" src="../js/graph.js"></script> <!-- Barchart -->

	<style>
		#bar-container{
			width: 600px;
			height: 400px;
		}

		.axis path,
		.axis line {
			fill: none;
			stroke: black;
			shape-rendering: crispEdges;
		}
		.axis text {
			font-family: sans-serif;
			font-size: 11px;
		}
		.bar_rect{
			fill: #1f77b4;
		}
		.bar_rect:hover{
			fill: #ff7f0e;
			cursor: pointer;
		}
		.chart-title{
			font-family: sans-serif;
			font-weight: bold;
			font-size: 14px;
		}
		.chart-tooltip{
			background-color: #eee;
			box-shadow: 0 0 5px #999999;
			color: #333;
			display: none;
			font-size: 12px;
			left: 130px;
			padding: 10px;
			position: absolute;
			text-align: center;
			top: 95px;
			width: 100px;
			z-index: 10;
			-webkit-border-radius: 10px;
			-moz-border-radius: 10px;
			border-radius: 10px;
			-webkit-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
			-moz-box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
			box-shadow: 4px 4px 10px rgba(0, 0, 0, 0.4);
			pointer-events: none;
			font-family: sans-serif;
		}
		.tooltip-year{
			font-weight: bold;
		}
	</style>
</head>

<body>
	<div>
		Basin: <select id="basin" class="filter">
			<option value="both">Both</option>
			<option value="AL">Atlantic</option>
			<option value="EP">Pacific</option>
			</select>
		Max Wind:<input type="text" id="maxwind" class="filter"><br/>
		Min Pressure:<input type="text" id="minpres" class="filter">
	</div>
	<div id="bar-container"></div>
	
	<script>
		var barChart = null;
		d3.json("../resources/filteredDatav1.json", function(err, data) {
			if (err) throw err;

			$
			var filter = {};
			filter.max_wind = -999999;
			filter.min_pressure = 999999;
			barChart = new BarChart("#bar-container", "num-hurricanes", data, filter, "both");
			barChart.init();
		});
		
		$('.filter').change(function(){
			var basin = $('#basin').val();
			var maxwind = $('#maxwind').val();
			if(maxwind == "")
				maxwind = -1;
			var minpres = $('#minpres').val();
			if(minpres == "")
				minpres = 999999;
			
			var filter = {};
			filter.max_wind = parseFloat(maxwind);
			filter.min_pressure = parseFloat(minpres);
			barChart.update(filter, basin);
		});

	</script>
</body>